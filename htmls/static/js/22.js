webpackJsonp([22],{"6jbM":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n("a3Yh"),a=n.n(i),l=n("3cXf"),r=n.n(l),s=n("+RKF"),c=n("Zq1L"),d=n("Y2Yx"),u=n("KzFb"),g=(o={components:{oneBtnJoin:d.a,clauseAlert:u.a,topNotice:{props:{html:String},render:function(t){return t(s.default.extend({template:"<li>"+this.html+"</li>",methods:{toOpenning:function(t){console.log(1),console.log(t+111),window.open(t,"_self")}}}),{})}}},name:"noticeList",data:function(){return{id:null,tabName:"XL002",redFlag:!0,noDate:!1,pageIndex:1,start_id:0,per_count:20,noticeList:[],flag:0,imgSrc:null,planInfo:null,addAlertShow:!1,addPerson:null,alertIndex:null,alertClauseShow:!1,to_do:null}},computed:{},created:function(){},mounted:function(){var t=this;if(this.actionCount("notice_page"),console.log(this),this.getPublicList(),console.log(sessionStorage.getItem("myPlanInfo")+123),sessionStorage.getItem("myPlanInfo")){var e=JSON.parse(sessionStorage.getItem("myPlanInfo"));console.log(e),e.dataList.forEach(function(e){e.plans.forEach(function(n){var o={};o.insured=e.insured,o.plan=n,t.planInfo=o})}),this.planInfo||this.$router.replace("/weibo/insure-plan")}else console.log(123),this.getPlanList()}},a()(o,"created",function(){}),a()(o,"methods",{handleHtml:function(t){},handleHtml2:function(t){console.log(t.target)},toOpenning:function(t){console.log(1),console.log(t+111),this.$router.push({path:t})},cancalAdd:function(){this.addAlertShow=!1,this.addPerson=null},addPlanSuc:function(){this.getPlanList(),this.cancalAdd()},showClauseAlert:function(t){this.alertClauseShow=!0,this.alertIndex=t},addPlanAlert:function(t){var e=this;this.actionCount("addPlan_click2",function(){"XL001"==t.notHaveCode?e.$router.push("/weibo/insure-illIntro"):(e.addAlertShow=!0,e.addPerson=t)})},getPlanList:function(){var t=this;console.log(111),this.$get(c.a.getMyPolicy,{}).then(function(e){0==e.code?(console.log(e),t.$get(c.a.getPolicyList,{}).then(function(n){if(0==n.code){console.log(e);var o=n.data.policy_list.map(function(e){var n="",o=[];(e.plans.map(function(t){o.push(t.plan_code)}),o.length>0&&-1==o.indexOf("XL003")&&(n="XL003"),o.length>0&&-1==o.indexOf("XL001"))&&(t.getIdCardAge(e.insured.idno_init)<60&&(n="XL001"));return e.insured.notHaveCode=n,e}),i={fromUrl:"plan",validCount:n.data.policy_list.length,dataList:o,planStatus:"activated"==e.data.plan_list_state.XL001||"activated"==e.data.plan_list_state.XL002?1:0,planStatusFY:"activated"==e.data.plan_list_state.XL003?1:0,totalMoney:e.data.total_amnt};sessionStorage.setItem("myPlanInfo",r()(i)),i.dataList.forEach(function(e){e.plans.forEach(function(n){if(n.son_policy_no==t.id){var o={};return o.insured=e.insured,o.plan=n,void(t.planInfo=o)}})}),t.planInfo||t.$router.replace("/weibo/insure-plan")}else t.$toast(n.msg||"请求超时，请刷新重试")})):t.$toast(e.msg||"请求超时，请刷新重试")})},refresh:function(){this.pageIndex=1,this.start_id=0,this.noDate=!1,this.getPublicList()},infinite:function(t){console.log("shanglajiazai"),console.log(this.start_id);var e=this;setTimeout(function(){e.noDate?e.$refs.myscroller.finishInfinite(!0):(e.pageIndex++,e.start_id=e.noticeList[e.noticeList.length-1].id,e.noticeList&&console.log(e.noticeList[e.noticeList.length-1].id),e.noticeList&&(e.start_id,e.noticeList[e.noticeList.length-1].id,console.log(e.start_id)),e.getPublicList(t))},1e3)},getPublicList:function(t){var e=this;console.log("获取分页消息列表数据");var n=this;n.$get(c.a.getNoticeList,{start_id:n.start_id,per_count:n.per_count}).then(function(o){n.$refs.myscroller.finishPullToRefresh(),0==o.code?(console.log(o),"function"==typeof t&&t(),0==o.data.msg_list.length?(console.log("没有数据了~~~~~~~~~~~~~~~~~~~"),n.noDate=!0):n.noDate=!1,0==n.start_id?(console.log("diyiye"),n.noticeList=o.data.msg_list):(console.log("dinye"),n.noticeList=n.noticeList.concat(o.data.msg_list),o.data.msg_list.length>0&&(n.start_id=o.data.msg_list[o.data.msg_list.length-1].id))):e.$toast(o.msg||"请求超时，请刷新重试")})}}),o),h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sina_page"},[n("div",{staticClass:"notice_wrap"},[n("scroller",{ref:"myscroller",attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite}},t._l(t.noticeList,function(t,e){return n("ul",{staticClass:"noticeUl"},[n("topNotice",{attrs:{html:t.content}})],1)}),0)],1),t._v(" "),t.addPerson?n("oneBtnJoin",{attrs:{addAlertShow:t.addAlertShow,addPerson:t.addPerson},on:{cancalAdd:t.cancalAdd,showClauseAlert:t.showClauseAlert,addPlanSuc:t.addPlanSuc}}):t._e(),t._v(" "),t.alertClauseShow?n("clause-alert",{attrs:{alertShow:t.alertClauseShow,alertIndex:t.alertIndex},on:{closeClauseAlert:function(e){t.alertClauseShow=!1}}}):t._e()],1)},staticRenderFns:[]};var f=n("C7Lr")(g,h,!1,function(t){n("c+qQ")},null,null);e.default=f.exports},RUR6:function(t,e,n){var o=n("Wtcz");o(o.S+o.F*!n("uoC7"),"Object",{defineProperty:n("hHwa").f})},a3Yh:function(t,e,n){"use strict";e.__esModule=!0;var o,i=n("liLe"),a=(o=i)&&o.__esModule?o:{default:o};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},"c+qQ":function(t,e,n){var o=n("qj1E");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("FIqI")("6739ed34",o,!0,{})},liLe:function(t,e,n){t.exports={default:n("zhwF"),__esModule:!0}},qj1E:function(t,e,n){(t.exports=n("UTlt")(!1)).push([t.i,"\n.noticeUl{padding:0.9375rem\n}\n.noticeUl li{width:21.5625rem;height:auto;padding:1.25rem;padding-bottom:1.5625rem;background:#FFFFFF;border-radius:0.625rem;margin-bottom:0.9375rem\n}\n.noticeUl li .notice_wrap h2{font-size:1rem;font-weight:500;color:#333333;line-height:1.40625rem;border-bottom:0.0625rem solid #E6E6E6;margin-bottom:0.9375rem;padding-bottom:0.78125rem\n}\n.noticeUl li .notice_wrap h2 span{font-size:0.75rem;font-weight:400;color:#939393;float:right\n}\n.noticeUl li .notice_wrap h3{font-size:0.875rem;font-weight:500;color:#FF8200;line-height:1.1875rem;margin-bottom:0.75rem\n}\n.noticeUl li .notice_wrap p{font-size:0.8125rem;font-weight:400;color:#333333;line-height:1.1875rem\n}\n.noticeUl li .notice_wrap div.grey p{font-size:0.75rem;font-weight:400;color:#939393;line-height:1.03125rem;margin-bottom:0.3125rem\n}\n.noticeUl li .notice_wrap div.grey p:last-child{margin-bottom:0\n}\n.noticeUl li .notice_wrap h5{font-size:1.3125rem;font-weight:500;color:#333333;line-height:1.84375rem;margin-bottom:0.625rem\n}\n.noticeUl li .notice_wrap button{width:16.25rem;height:2.4375rem;background:-webkit-gradient(linear, right top, left top, from(#FF4469), to(#FF6546));background:linear-gradient(270deg, #FF4469 0%, #FF6546 100%);border-radius:1.21875rem;display:block;margin:0 auto;margin-top:1.0625rem;border:0;font-size:1rem;font-weight:400;color:#FFFFFF\n}\n.noticeUl li .notice_wrap section{width:4.0625rem;float:right;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.noticeUl li .notice_wrap section img{width:0.75rem;height:0.75rem;margin-left:0.125rem\n}\n",""])},zhwF:function(t,e,n){n("RUR6");var o=n("ZuHZ").Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}}});